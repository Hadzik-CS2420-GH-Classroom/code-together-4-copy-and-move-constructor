<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1180 750" font-family="Consolas, monospace" font-size="13">

  <!-- ==================== TITLE ==================== -->
  <text x="590" y="30" text-anchor="middle" font-size="20" font-weight="bold" fill="#222">
    FancyNameTag Move Assignment: Steal into an Existing Object
  </text>
  <text x="590" y="50" text-anchor="middle" font-size="13" fill="#666">
    fTarget = std::move(fOriginal);
  </text>

  <!-- ==================== BEFORE (left half) ==================== -->
  <text x="250" y="80" text-anchor="middle" font-size="16" font-weight="bold" fill="#333">Before Move Assignment</text>

  <!-- Stack region (before) -->
  <rect x="30" y="95" width="210" height="380" rx="8" fill="#e8f0fe" stroke="#4285f4" stroke-width="1.5"/>
  <text x="40" y="115" font-size="12" font-weight="bold" fill="#4285f4">STACK</text>

  <!-- fOriginal box (before) -->
  <rect x="45" y="125" width="180" height="155" rx="6" fill="#fff" stroke="#333" stroke-width="2"/>
  <text x="135" y="148" text-anchor="middle" font-weight="bold" font-size="14" fill="#333">fOriginal</text>

  <!-- id_ -->
  <rect x="57" y="155" width="155" height="26" rx="4" fill="#fff3e0" stroke="#e65100" stroke-width="1"/>
  <text x="67" y="173" fill="#333">id_ =</text>
  <text x="110" y="173" font-weight="bold" fill="#e65100">1</text>

  <!-- company_ -->
  <rect x="57" y="185" width="155" height="40" rx="4" fill="#e3f2fd" stroke="#1565c0" stroke-width="1"/>
  <text x="67" y="203" fill="#333">company_ =</text>
  <text x="62" y="219" font-weight="bold" font-size="10" fill="#1565c0">"Weber State Univ."</text>

  <!-- bio_ pointer -->
  <rect x="57" y="229" width="155" height="26" rx="4" fill="#e8f5e9" stroke="#2e7d32" stroke-width="1"/>
  <text x="67" y="247" fill="#333">bio_</text>
  <circle cx="198" cy="242" r="5" fill="#2e7d32"/>

  <!-- fTarget box (before — has OLD data) -->
  <rect x="45" y="300" width="180" height="155" rx="6" fill="#fff" stroke="#333" stroke-width="2"/>
  <text x="135" y="323" text-anchor="middle" font-weight="bold" font-size="14" fill="#333">fTarget</text>

  <!-- id_ (old) -->
  <rect x="57" y="330" width="155" height="26" rx="4" fill="#fff3e0" stroke="#e65100" stroke-width="1"/>
  <text x="67" y="348" fill="#333">id_ =</text>
  <text x="110" y="348" font-weight="bold" fill="#e65100">2</text>

  <!-- company_ (old) -->
  <rect x="57" y="360" width="155" height="40" rx="4" fill="#e3f2fd" stroke="#1565c0" stroke-width="1"/>
  <text x="67" y="378" fill="#333">company_ =</text>
  <text x="62" y="394" font-weight="bold" font-size="10" fill="#1565c0">"School of Comp."</text>

  <!-- bio_ pointer (old) -->
  <rect x="57" y="404" width="155" height="26" rx="4" fill="#e8f5e9" stroke="#2e7d32" stroke-width="1"/>
  <text x="67" y="422" fill="#333">bio_</text>
  <circle cx="198" cy="417" r="5" fill="#c62828"/>

  <!-- Heap region (before — TWO Bio blocks) -->
  <rect x="270" y="95" width="210" height="380" rx="8" fill="#e8f8e8" stroke="#2e7d32" stroke-width="1.5"/>
  <text x="280" y="115" font-size="12" font-weight="bold" fill="#2e7d32">HEAP</text>

  <!-- Original's Bio block (before) -->
  <rect x="285" y="125" width="180" height="140" rx="6" fill="#c8e6c9" stroke="#2e7d32" stroke-width="1.5"/>
  <text x="375" y="148" text-anchor="middle" font-weight="bold" font-size="12" fill="#1b5e20">Bio (original's)</text>

  <text x="295" y="168" fill="#333" font-size="11">name = "Scott"</text>
  <text x="295" y="186" fill="#333" font-size="11">title = "Professor"</text>
  <text x="295" y="204" fill="#333" font-size="11">dept = "Comp Sci"</text>
  <text x="295" y="222" fill="#333" font-size="11">year = 2010</text>

  <text x="375" y="255" text-anchor="middle" font-size="10" fill="#2e7d32">HEAP addr: aaa11</text>

  <!-- Target's OLD Bio block (before — will be deleted) -->
  <rect x="285" y="290" width="180" height="140" rx="6" fill="#ffcdd2" stroke="#c62828" stroke-width="1.5"/>
  <text x="375" y="313" text-anchor="middle" font-weight="bold" font-size="12" fill="#c62828">Bio (target's OLD)</text>

  <text x="295" y="333" fill="#333" font-size="11">name = "Alice"</text>
  <text x="295" y="351" fill="#333" font-size="11">title = "TA"</text>
  <text x="295" y="369" fill="#333" font-size="11">dept = "Math"</text>
  <text x="295" y="387" fill="#333" font-size="11">year = 2023</text>

  <text x="375" y="420" text-anchor="middle" font-size="10" fill="#c62828">HEAP addr: ccc33</text>

  <!-- Arrow: fOriginal.bio_ -> original Bio -->
  <line x1="203" y1="242" x2="283" y2="200" stroke="#2e7d32" stroke-width="2" marker-end="url(#arrowGreen)"/>

  <!-- Arrow: fTarget.bio_ -> old Bio -->
  <line x1="203" y1="417" x2="283" y2="370" stroke="#c62828" stroke-width="2" marker-end="url(#arrowRed)"/>

  <!-- ==================== BIG ARROW ==================== -->
  <text x="570" y="200" text-anchor="middle" font-size="28" fill="#555">&#x27A1;</text>
  <text x="570" y="220" text-anchor="middle" font-size="10" fill="#888">fTarget =</text>
  <text x="570" y="234" text-anchor="middle" font-size="10" fill="#888">std::move(fOriginal)</text>

  <!-- "No new!" badge in center -->
  <rect x="540" y="250" width="60" height="22" rx="4" fill="#e8f5e9" stroke="#2e7d32" stroke-width="1.5"/>
  <text x="570" y="265" text-anchor="middle" font-size="10" font-weight="bold" fill="#2e7d32">No new!</text>

  <!-- Step labels in the middle -->
  <rect x="535" y="295" width="70" height="72" rx="4" fill="#fff3e0" stroke="#e65100" stroke-width="1"/>
  <text x="570" y="311" text-anchor="middle" font-size="9" font-weight="bold" fill="#e65100">Steps:</text>
  <text x="570" y="325" text-anchor="middle" font-size="9" fill="#666">1. delete old</text>
  <text x="570" y="337" text-anchor="middle" font-size="9" fill="#666">2. take id</text>
  <text x="570" y="349" text-anchor="middle" font-size="9" fill="#666">3. move str</text>
  <text x="570" y="361" text-anchor="middle" font-size="9" fill="#666">4. exchange</text>

  <!-- ==================== AFTER (right half) ==================== -->
  <text x="910" y="80" text-anchor="middle" font-size="16" font-weight="bold" fill="#333">After Move Assignment</text>

  <!-- Stack region (after) -->
  <rect x="680" y="95" width="210" height="380" rx="8" fill="#e8f0fe" stroke="#4285f4" stroke-width="1.5"/>
  <text x="690" y="115" font-size="12" font-weight="bold" fill="#4285f4">STACK</text>

  <!-- fOriginal box (after — moved-from, grayed out) -->
  <rect x="695" y="125" width="180" height="155" rx="6" fill="#f5f5f5" stroke="#999" stroke-width="2" stroke-dasharray="6,3"/>
  <text x="785" y="148" text-anchor="middle" font-weight="bold" font-size="13" fill="#999">fOriginal (moved-from)</text>

  <!-- id_ (still has value — int is just copied) -->
  <rect x="707" y="155" width="155" height="26" rx="4" fill="#fff3e0" stroke="#e65100" stroke-width="1"/>
  <text x="717" y="173" fill="#333">id_ =</text>
  <text x="760" y="173" font-weight="bold" fill="#e65100">1</text>
  <text x="780" y="173" font-size="9" fill="#888">still here</text>

  <!-- company_ (moved — now empty) -->
  <rect x="707" y="185" width="155" height="40" rx="4" fill="#ffebee" stroke="#c62828" stroke-width="1" stroke-dasharray="4,2"/>
  <text x="717" y="203" fill="#999">company_ =</text>
  <text x="717" y="219" font-weight="bold" font-size="10" fill="#c62828">""  (moved)</text>

  <!-- bio_ pointer (now nullptr) -->
  <rect x="707" y="229" width="155" height="26" rx="4" fill="#ffebee" stroke="#c62828" stroke-width="1" stroke-dasharray="4,2"/>
  <text x="717" y="247" fill="#999">bio_ =</text>
  <text x="765" y="247" font-weight="bold" fill="#c62828">nullptr</text>

  <!-- fTarget box (after — now owns the stolen Bio) -->
  <rect x="695" y="300" width="180" height="155" rx="6" fill="#e8f5e9" stroke="#2e7d32" stroke-width="2.5"/>
  <text x="785" y="323" text-anchor="middle" font-weight="bold" font-size="13" fill="#2e7d32">fTarget (overwritten)</text>

  <!-- id_ (now 1) -->
  <rect x="707" y="335" width="155" height="26" rx="4" fill="#fff3e0" stroke="#e65100" stroke-width="1.5"/>
  <text x="717" y="353" fill="#333">id_ =</text>
  <text x="760" y="353" font-weight="bold" fill="#e65100">1</text>
  <text x="780" y="353" font-size="10" fill="#f57f17">&#x2190; was 2</text>

  <!-- company_ (stolen via std::move) -->
  <rect x="707" y="365" width="155" height="40" rx="4" fill="#e3f2fd" stroke="#1565c0" stroke-width="1.5"/>
  <text x="717" y="383" fill="#333">company_ =</text>
  <text x="712" y="399" font-weight="bold" font-size="10" fill="#1565c0">"Weber State Univ."</text>

  <!-- bio_ pointer (stolen via std::exchange — SAME address as original's!) -->
  <rect x="707" y="409" width="155" height="26" rx="4" fill="#e8f5e9" stroke="#2e7d32" stroke-width="1.5"/>
  <text x="717" y="427" fill="#333">bio_</text>
  <circle cx="848" cy="422" r="5" fill="#2e7d32"/>

  <!-- Heap region (after — only original's Bio remains, target's old Bio deleted) -->
  <rect x="920" y="95" width="230" height="380" rx="8" fill="#e8f8e8" stroke="#2e7d32" stroke-width="1.5"/>
  <text x="930" y="115" font-size="12" font-weight="bold" fill="#2e7d32">HEAP</text>

  <!-- SAME Bio block from fOriginal (pointer was transferred to fTarget) -->
  <rect x="935" y="310" width="200" height="140" rx="6" fill="#c8e6c9" stroke="#2e7d32" stroke-width="2"/>
  <text x="1035" y="333" text-anchor="middle" font-weight="bold" font-size="12" fill="#1b5e20">Bio (SAME object!)</text>

  <text x="945" y="353" fill="#333" font-size="11">name = "Scott"</text>
  <text x="945" y="371" fill="#333" font-size="11">title = "Professor"</text>
  <text x="945" y="389" fill="#333" font-size="11">dept = "Comp Sci"</text>
  <text x="945" y="407" fill="#333" font-size="11">year = 2010</text>

  <text x="1035" y="442" text-anchor="middle" font-size="10" fill="#2e7d32">HEAP addr: aaa11 (SAME!)</text>

  <!-- Old Bio — DELETED (shown as ghost) -->
  <rect x="935" y="125" width="200" height="30" rx="6" fill="#f5f5f5" stroke="#bbb" stroke-width="1" stroke-dasharray="6,3"/>
  <text x="1035" y="145" text-anchor="middle" font-size="10" fill="#999">ccc33 DELETED (old Bio freed)</text>

  <!-- Empty spot — no new allocation -->
  <rect x="935" y="170" width="200" height="100" rx="6" fill="#f5f5f5" stroke="#bbb" stroke-width="1" stroke-dasharray="6,3"/>
  <text x="1035" y="210" text-anchor="middle" font-size="11" fill="#999">No allocation here.</text>
  <text x="1035" y="228" text-anchor="middle" font-size="11" fill="#999">Bio pointer was stolen,</text>
  <text x="1035" y="246" text-anchor="middle" font-size="11" fill="#999">not copied!</text>

  <!-- Arrow: fTarget.bio_ -> SAME Bio -->
  <line x1="853" y1="422" x2="933" y2="390" stroke="#2e7d32" stroke-width="2" marker-end="url(#arrowGreen)"/>

  <!-- No arrow from fOriginal (bio_ is nullptr) -->
  <text x="860" y="247" font-size="14" font-weight="bold" fill="#c62828">&#x2717;</text>
  <text x="875" y="247" font-size="9" fill="#c62828">nullptr</text>

  <!-- ==================== CALLOUT BOXES ==================== -->

  <!-- Move assignment mechanics callout -->
  <rect x="30" y="500" width="550" height="105" rx="6" fill="#e8f5e9" stroke="#2e7d32" stroke-width="1.5"/>
  <text x="305" y="522" text-anchor="middle" font-size="12" font-weight="bold" fill="#2e7d32">Move Assignment: delete old Bio, then steal</text>
  <text x="305" y="540" text-anchor="middle" font-size="11" fill="#666">1. Self-assignment check: if (this != &amp;other)</text>
  <text x="305" y="556" text-anchor="middle" font-size="11" fill="#666">2. Delete old Bio:        delete bio_;</text>
  <text x="305" y="572" text-anchor="middle" font-size="11" fill="#666">3. Take id, move string:  id_ = other.id_;  company_ = std::move(...);</text>
  <text x="305" y="588" text-anchor="middle" font-size="11" fill="#666">4. Exchange bio pointer:  bio_ = std::exchange(other.bio_, nullptr);</text>
  <text x="305" y="600" text-anchor="middle" font-size="11" fill="#444">   No "new" anywhere — O(1) pointer swap + delete of old Bio.</text>

  <!-- vs other operations callout -->
  <rect x="610" y="500" width="540" height="105" rx="6" fill="#fff3e0" stroke="#e65100" stroke-width="1.5"/>
  <text x="880" y="522" text-anchor="middle" font-size="12" font-weight="bold" fill="#e65100">Move Assignment vs Copy Assignment</text>
  <text x="880" y="540" text-anchor="middle" font-size="11" fill="#666">Copy Assignment:  delete bio_; ... bio_ = new Bio(*other.bio_);</text>
  <text x="880" y="556" text-anchor="middle" font-size="11" fill="#666">  Deletes old + allocates new heap memory. Source unchanged.</text>
  <text x="880" y="576" text-anchor="middle" font-size="11" fill="#666">Move Assignment:  delete bio_; ... bio_ = std::exchange(...);</text>
  <text x="880" y="592" text-anchor="middle" font-size="11" fill="#666">  Deletes old + steals pointer. Source is gutted (nullptr).</text>

  <!-- Self-assignment + moved-from callout -->
  <rect x="30" y="620" width="1120" height="55" rx="6" fill="#ffebee" stroke="#c62828" stroke-width="1.5"/>
  <text x="590" y="642" text-anchor="middle" font-size="12" font-weight="bold" fill="#c62828">Self-assignment check is still required: if (this != &amp;other)</text>
  <text x="590" y="660" text-anchor="middle" font-size="11" fill="#666">Without it, "fTarget = std::move(fTarget)" would delete the Bio, then try to steal the now-dangling pointer — undefined behavior!</text>

  <!-- noexcept + return *this callout -->
  <rect x="30" y="690" width="1120" height="40" rx="6" fill="#e3f2fd" stroke="#1565c0" stroke-width="1.5"/>
  <text x="590" y="707" text-anchor="middle" font-size="11" fill="#1565c0">Marked noexcept (no allocation = no throw). Returns *this for chaining: a = std::move(b) = std::move(c);</text>
  <text x="590" y="722" text-anchor="middle" font-size="11" fill="#1565c0">Both move constructor and move assignment leave the source in a "valid but unspecified" state — safe to destroy, but don't use.</text>

  <!-- ==================== ARROW MARKERS ==================== -->
  <defs>
    <marker id="arrowGreen" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="8" markerHeight="8" orient="auto-start-reverse">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#2e7d32"/>
    </marker>
    <marker id="arrowRed" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="8" markerHeight="8" orient="auto-start-reverse">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#c62828"/>
    </marker>
  </defs>

</svg>
